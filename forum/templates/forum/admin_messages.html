{% extends "forum/base.html" %}

{% block sidebar_links %}
<a href="{% url 'admin_dashboard' %}" class="sidebar-link">Dashboard</a>
<a href="{% url 'manage_users' %}" class="sidebar-link">Manage Users</a>
<a href="{% url 'manage_posts' %}" class="sidebar-link">Manage Posts</a>
<a href="{% url 'admin_messages' %}" class="sidebar-link active">Customer Messages</a>
<a href="{% url 'logout' %}" class="sidebar-link">Logout</a>
{% endblock %}

{% block content %}
<h1 class="page-title">Customer Messages</h1>

<div class="cards-container">
    {% for msg in messages %}
    <div class="card">
        <h2 class="card-title">{{ msg.subject }}</h2>

        <p><strong>From:</strong> {{ msg.user.username }} ({{ msg.user.email }})</p>
        <p><strong>Message:</strong><br>{{ msg.message }}</p>
        <p><strong>Sent:</strong> {{ msg.created_at|date:"M d, Y H:i" }}</p>

        <div class="card-actions">
            <form action="{% url 'delete_message' msg.id %}" method="POST">
                {% csrf_token %}
                <button class="btn btn-delete">üóëÔ∏è Delete</button>
            </form>
        </div>
    </div>
    {% empty %}
    <p style="text-align:center;">No messages found.</p>
    {% endfor %}
</div>

<style>
.page-title {
    text-align:center;
    color:#0b7d36;
    margin-bottom:20px;
}

.cards-container {
    display:flex;
    flex-wrap:wrap;
    gap:20px;
    justify-content:center;
}

.card {
    width:320px;
    background:white;
    padding:15px;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.15);
    border-left:6px solid #0b7d36;
}

.card-title {
    margin:0 0 10px;
    color:#0b7d36;
}

.card-actions {
    margin-top:15px;
    display:flex;
    gap:10px;
}

.btn-delete {
    padding:8px 12px;
    border:none;
    border-radius:6px;
    color:white;
    background:#c0392b;
    cursor:pointer;
    width:100%;
}
</style>

{% endblock %}
