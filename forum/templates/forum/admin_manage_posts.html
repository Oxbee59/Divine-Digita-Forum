{% extends "forum/base.html" %}

{% block sidebar_links %}
<a href="{% url 'admin_dashboard' %}" class="sidebar-link">Dashboard</a>
<a href="{% url 'manage_users' %}" class="sidebar-link">Manage Users</a>
<a href="{% url 'manage_posts' %}" class="sidebar-link active">Manage Posts</a>
<a href="{% url 'admin_messages' %}" class="sidebar-link">Customer Messages</a>
<a href="{% url 'logout' %}" class="sidebar-link">Logout</a>
{% endblock %}

{% block content %}
<h1 class="page-title">Manage Posts</h1>

<div class="cards-container">
    {% for post in uploads %}
    <div class="card">

        {% if post.image %}
        <img src="{{ post.image.url|replace:'upload/','upload/w_900,h_500,c_fill,f_auto,q_auto/' }}" class="card-img">
        {% endif %}

        {% if post.video %}
        <video controls class="card-video">
            <source src="{{ post.video.url|replace:'upload/','upload/w_900,h_500,c_fill,f_auto,q_auto/' }}">
        </video>
        {% endif %}

        <h2 class="card-title">{{ post.title }}</h2>

        <p><strong>Category:</strong> {{ post.category.name }}</p>
        <p><strong>Author:</strong> {{ post.user.username }}</p>
        <p><strong>Created:</strong> {{ post.created_at|date:"M d, Y" }}</p>

        <div class="card-actions">
            <a href="{% url 'edit_post' post.id %}" class="btn btn-edit">âœï¸ Edit</a>
            <form method="post" action="{% url 'delete_post' post.id %}">
                {% csrf_token %}
                <button class="btn btn-delete">ğŸ—‘ï¸ Delete</button>
            </form>
        </div>

    </div>
    {% empty %}
    <p style="text-align:center;">No posts found.</p>
    {% endfor %}
</div>

{% endblock %}
