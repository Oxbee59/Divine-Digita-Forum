{% extends "forum/base.html" %}

{% block sidebar_links %}
<a href="{% url 'admin_dashboard' %}" class="sidebar-link">Dashboard</a>
<a href="{% url 'manage_users' %}" class="sidebar-link">Manage Users</a>
<a href="{% url 'manage_posts' %}" class="sidebar-link active">Manage Posts</a>
<a href="{% url 'admin_messages' %}" class="sidebar-link">Customer Messages</a>
<a href="{% url 'logout' %}" class="sidebar-link">Logout</a>
{% endblock %}

{% block content %}
<h1 class="page-title">Manage Posts</h1>

<div class="cards-container">
    {% for post in uploads %}
    <div class="card">
        <h2 class="card-title">{{ post.title }}</h2>

        <p><strong>Category:</strong> {{ post.category.name }}</p>
        <p><strong>Author:</strong> {{ post.user.username }}</p>
        <p><strong>Created:</strong> {{ post.created_at|date:"M d, Y" }}</p>

        <div class="card-actions">
            <form method="post" action="{% url 'edit_post' post.id %}">
                {% csrf_token %}
                <button class="btn btn-edit">‚úèÔ∏è Edit</button>
            </form>

            <form method="post" action="{% url 'delete_post' post.id %}">
                {% csrf_token %}
                <button class="btn btn-delete">üóëÔ∏è Delete</button>
            </form>
        </div>
    </div>
    {% empty %}
    <p style="text-align:center;">No posts found.</p>
    {% endfor %}
</div>

<style>
.page-title {
    text-align:center;
    color:#0b7d36;
    margin-bottom:20px;
}

.cards-container {
    display:flex;
    flex-wrap:wrap;
    gap:20px;
    justify-content:center;
}

.card {
    width:300px;
    background:white;
    padding:15px;
    border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.15);
    border-left:6px solid #0b7d36;
}

.card-title {
    margin:0 0 10px;
    color:#0b7d36;
}

.card-actions {
    margin-top:15px;
    display:flex;
    gap:10px;
}

.btn {
    padding:8px 12px;
    border:none;
    border-radius:6px;
    color:white;
    cursor:pointer;
    width:100%;
}

.btn-edit {
    background:#0b7d36;
}

.btn-delete {
    background:#c0392b;
}
</style>
{% endblock %}
